(function(b){var a={init:function(c){this.each(function(){if(b(this).hasClass("alternate-scroll")){return}b(this).addClass("alternate-scroll");var E=b.extend({"animation-time":500,"bar-class":"","vertical-bar-class":"","horizontal-bar-class":"","mouse-wheel-sensitivity":2,"auto-size":true,"hide-bars":true,easing:"easeOutCubic"},c);var g=b(this).width();var D=b(this).height();var C=b(this).css("overflow");var d=b(this).css("float");var B=b(this).scrollTop(0).scrollLeft(0).css({overflow:"hidden"}).data({"prev-overflow":C,"prev-float":d});B.wrapInner('<div class="alt-scroll-holder" style="position: relative;"><div class="alt-scroll-content" style="position: absolute; top: 0; left: 0"></div></div>');var x=b(".alt-scroll-holder",B);var G=b(".alt-scroll-content",B);x.width(g).height(D);var F=G.width();G.css("width",F);var s=G.height();var y=D/s;var m=g/F;var A;var r;var p;var o=k();x.append('<div class="alt-scroll-vertical-bar '+E["bar-class"]+" "+E["vertical-bar-class"]+'"><ins></ins></div>');var K=b(".alt-scroll-vertical-bar",x);if(document.all&&document.documentMode<=8&&E["bar-class"]==""&&E["vertical-bar-class"]==""){K.css({background:"gray",marginBottom:"4px"})}K.css({display:"block",position:"absolute",top:0,right:0});if((K.css("background-color")=="rgba(0, 0, 0, 0)")&&(K.css("background-image")=="none")){K.css("background-color","rgba(0, 0, 0, 0.3)")}if((K.css("background-color")=="transparent")&&(K.css("background-image")=="none")){K.css("background-color","rgba(0, 0, 0, 0.3)")}if(parseInt(K.css("width"))==0||K.css("width")=="auto"){K.css({width:7,"border-radius":3,cursor:"default"})}var j=K.width();var f=Math.floor(D*y);K.height(f-parseInt(K.css("margin-bottom")));if(y<1){if(E["hide-bars"]){K.delay(2*E["animation-time"]).fadeOut(E["animation-time"]/2)}}else{K.hide()}x.append('<div class="alt-scroll-horizontal-bar '+E["bar-class"]+" "+E["horizontal-bar-class"]+'"><ins></ins></div>');var u=b(".alt-scroll-horizontal-bar",x);u.css({display:"block",position:"absolute",bottom:0,left:0});if((u.css("background-color")=="rgba(0, 0, 0, 0)")&&(u.css("background-image")=="none")){u.css("background-color","rgba(0, 0, 0, 0.3)")}if((u.css("background-color")=="transparent")&&(u.css("background-image")=="none")){u.css("background-color","rgba(0, 0, 0, 0.3)")}if(parseInt(u.css("height"))==0||u.css("height")=="auto"){u.css({height:7,"border-radius":3,cursor:"default"})}var e=u.height();var t=Math.floor(g*m);var w=0;if(K){w=parseInt(u.css("margin-right"))+Math.ceil(j*1.2);u.css({"margin-right":w})}u.width(t-w);if(m<1){if(E["hide-bars"]){u.delay(2*E["animation-time"]).fadeOut(E["animation-time"]/2)}}else{u.hide()}var J=(D-s)/(D-f);var I=(g-F)/(g-t);if(o){var v=x.offset().top;var i=x.offset().left;var q=D-s;if(q>0){q=0}var l=g-F;if(l>0){l=0}G.draggable({scrollSensitivity:40,containment:[l+i,q+v,i,v]}).bind("drag",function(){K.stop(true,true).css("top",parseInt(b(this).css("top"))/J);u.stop(true,true).css("left",parseInt(b(this).css("left"))/I)}).mousedown(function(){b(this).stop(true,false);var L=new Date();p=L.getTime();A=parseInt(b(this).css("top"));r=parseInt(b(this).css("left"));if(E["hide-bars"]){if(y<1){K.stop(true,true).fadeIn(E["animation-time"]/2)}if(m<1){u.stop(true,true).fadeIn(E["animation-time"]/2)}}}).mouseup(function(){var O=new Date();var L=parseInt(b(this).css("top"));var N=parseInt(b(this).css("left"));var M=L+(L-A)*50/(O.getTime()-p);if(M<D-s){M=D-s}if(M>0){M=0}var P=N+(N-r)*50/(O.getTime()-p);if(P<g-F){P=g-F}if(P>0){P=0}b(this).stop(true,false).animate({top:M,left:P},E["animation-time"]);K.stop(true,true).animate({top:M/J},E["animation-time"]);u.stop(true,true).animate({left:P/I},E["animation-time"]);if(E["hide-bars"]){K.fadeOut(E["animation-time"]);u.fadeOut(E["animation-time"])}})}else{K.draggable({containment:B,axis:"y"}).bind("drag",function(){G.css("top",parseInt(b(this).css("top"))*J)});u.draggable({containment:B,axis:"x"}).bind("drag",function(){G.css("left",parseInt(b(this).css("left"))*I)});B.hover(function(){if(E["hide-bars"]){if(y<1){K.stop(true,true).css("opacity","").fadeIn(E["animation-time"]/4)}if(m<1){u.stop(true,true).css("opacity","").fadeIn(E["animation-time"]/4)}}H(true)},function(){if(E["hide-bars"]){if(y<1){K.stop(true,true).fadeOut(E["animation-time"]/2)}if(m<1){u.stop(true,true).fadeOut(E["animation-time"]/2)}}H(false)})}if(E["auto-size"]){setInterval(function(){h()},500)}function h(){G.css({height:"auto",width:"auto"});if((G.height()!=s)||(G.width()!=F)||(B.width()!=g)||(B.height()!=D)){g=B.width();D=B.height();x.width(g).height(D);F=G.width();G.css("width",F);s=G.height();y=D/s;m=g/F;f=Math.floor(D*y);if(y<1){K.height(f-parseInt(K.css("margin-bottom")));if(!E["hide-bars"]){K.stop(true,true).fadeIn(E["animation-time"]/2)}}else{K.stop(true,true).fadeOut(E["animation-time"]/2)}t=Math.floor(g*m);if(m<1){u.width(t-w);if(!E["hide-bars"]){u.stop(true,true).fadeIn(E["animation-time"]/2)}}else{u.stop(true,true).fadeOut(E["animation-time"]/2)}J=(D-s)/(D-f);I=(g-F)/(g-t);var M=parseInt(G.css("left"));if(M<g-F){M=g-F}if(M>0){M=0}var L=parseInt(G.css("top"));if(L<D-s){L=D-s}if(L>0){L=0}G.stop(true,false).animate({left:M,top:L},{duration:E["animation-time"]/2,queue:true});K.css("top",L/J);u.css("left",M/I);if(o){v=x.offset().top;i=x.offset().left;q=D-s;if(q>0){q=0}l=g-F;if(l>0){l=0}G.draggable({containment:[l+i,q+v,i,v]})}}}function H(L){if(L){if(window.addEventListener){window.addEventListener("DOMMouseScroll",z,false)}window.onmousewheel=document.onmousewheel=z}else{if(window.removeEventListener){window.removeEventListener("DOMMouseScroll",z)}window.onmousewheel=document.onmousewheel=null}}function z(L){var N=0;if(!L){L=window.event}if(L.wheelDelta){N=L.wheelDelta/120}else{if(L.detail){N=-L.detail/3}}if(N==0){return}if(y>=1){return}var M=parseInt(G.css("top"))+Math.floor(N*D/E["mouse-wheel-sensitivity"]);if(M>0){M=0}if(M<D-s){M=D-s}G.stop(true,false).animate({top:M},{duration:E["animation-time"],queue:true,easing:E.easing});K.stop(true,false).animate({top:M/J},{duration:E["animation-time"],queue:true,easing:E.easing});if(L.preventDefault){L.preventDefault()}L.returnValue=false}function k(){var L=(/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));try{document.createEvent("TouchEvent");return true&&L}catch(M){return false&&L}}function n(M,L){if(M.style.getPropertyValue){return(M.style.getPropertyValue(L))}else{return(M.style.getAttribute(L))}}})},remove:function(){this.each(function(){var c=b(this);if(!c.hasClass("alternate-scroll")){return}b(".alt-scroll-vertical-bar",c).remove();b(".alt-scroll-horizontal-bar",c).remove();b(".alt-scroll-content",c).wrapInner('<div class="alt-scroll-dummy"></div>');b(".alt-scroll-dummy",c).insertAfter(b(".alt-scroll-holder",c));b(".alt-scroll-holder",c).remove();b(".alt-scroll-dummy > *:first-child",c).unwrap();c.css({overflow:c.data("prev-overflow"),"float":c.data("prev-float")}).removeClass("alternate-scroll")})}};b.fn.alternateScroll=function(c){if(document.all&&typeof XDomainRequest=="undefined"){return}if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.alternateScroll")}}}})(jQuery);